<link rel="stylesheet" href="{{ path_to_root }}lib/toc.css"><script src="{{ path_to_root }}lib/toc.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    // 1. Find the location to insert the button (left part of the top bar)
    var leftButtons = document.querySelector('.left-buttons');
    if (!leftButtons) return;

    // 2. Check current language
    var path = window.location.pathname;
    // Simple detection: does the path contain /fr/?
    var isFr = path.indexOf('/fr/') !== -1;
    
    // 3. Define target language
    var targetLang = isFr ? 'en' : 'fr';
    var buttonLabel = isFr ? 'EN' : 'FR'; // Show the destination language
    var title = isFr ? 'Switch to English' : 'Passer en Fran√ßais';

    // 4. Create the button element
    var button = document.createElement('button');
    button.className = 'icon-button';
    button.style.cssText = "font-weight: bold; font-size: 14px; width: 30px; text-align: center;";
    button.innerText = buttonLabel;
    button.title = title;
    button.ariaLabel = title;

    // 5. Add click handler
    button.onclick = function() {
        var newPath;
        if (isFr) {
            newPath = path.replace('/fr/', '/en/');
        } else {
            // If we are in /en/, replace it. 
            // If /en/ is missing (root), append /fr/ (though root usually redirects)
            if (path.indexOf('/en/') !== -1) {
                newPath = path.replace('/en/', '/fr/');
            } else {
                // Fallback for edge cases
                newPath = 'fr/index.html';
            }
        }
        window.location.href = newPath;
    };

    // 6. Insert the button
    // We insert it as the last item in the left buttons group
    leftButtons.appendChild(button);
});
</script>
<link rel="stylesheet" href="/lib/toc.css"><script src="/lib/toc.js"></script>